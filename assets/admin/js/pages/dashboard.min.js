$(function(){altair_dashboard.init()}),altair_dashboard={init:function(){"use strict";altair_dashboard.peity_charts(),altair_dashboard.metrics_charts(),altair_dashboard.chartist_charts(),altair_dashboard.video_player(),altair_dashboard.clndr_calendar(),altair_dashboard.maplace_maps(),$window.on("load",function(){altair_dashboard.circular_statistics(),altair_dashboard.count_animated()})},metrics_charts:function(){var r="#mGraph_sale";if($(r).length){function e(){if(0==i)var i=$(r).height();var n=$(r).width();d3.json("data/mg_dashboard_chart.min.json").then(function(e){e=[e];for(var t=0;t<e.length;t++)e[t]=MG.convert.date(e[t],"date");var a=[{date:new Date("2016-02-26T00:00:00.000Z"),label:"Winter Sale"},{date:new Date("2016-06-02T00:00:00.000Z"),label:"Spring Sale"}];MG.data_graphic({data:e,y_scale_type:"log",width:n,height:i,right:20,target:r,markers:a,x_accessor:"date",y_accessor:"value"})})}e(),$window.on("debouncedresize",function(){e()}),$("#mGraph_sale").on("display.uk.check",function(){e()})}},chartist_charts:function(){new Chartist.Bar("#ct-chart",{labels:["Quarter 1","Quarter 2","Quarter 3","Quarter 4"],series:[[5,4,3,7],[3,2,9,5],[1,5,8,4],[2,3,4,6],[4,1,2,1]]},{stackBars:!0,axisX:{labelInterpolationFnc:function(e){return e.split(/\s+/).map(function(e){return e[0]}).join("")}},axisY:{offset:20}},[["screen and (min-width: 400px)",{reverseData:!0,horizontalBars:!0,axisX:{labelInterpolationFnc:Chartist.noop},axisY:{offset:60}}],["screen and (min-width: 800px)",{stackBars:!1,seriesBarDistance:10}],["screen and (min-width: 1000px)",{reverseData:!1,horizontalBars:!1,seriesBarDistance:15}]])},circular_statistics:function(){$(".epc_chart").easyPieChart({scaleColor:!1,trackColor:"#f5f5f5",lineWidth:5,size:110,easing:bez_easing_swiftOut})},maplace_maps:function(){if($("#map_users").length){var e=$("#map_users_list").children("li"),a=isHighDensity()?"assets/img/md-images/ic_location_history_black_48dp.png":"assets/img/md-images/ic_location_history_black_24dp.png",i=isHighDensity()?new google.maps.Size(48,48):new google.maps.Size(24,24),n=new google.maps.Size(24,24),r=[];e.each(function(){var e=$(this),t={lat:e.attr("data-gmap-lat"),lon:e.attr("data-gmap-lon"),title:e.attr("data-gmap-user"),html:'<div class="gmap-info-window"><h3 class="uk-text-nowrap">'+e.attr("data-gmap-user")+"</h3><p>"+e.attr("data-gmap-user-company")+"</p></div>",zoom:14,icon:{url:a,size:i,scaledSize:n}};r.push(t)});var s=new Maplace({map_div:"#map_users",locations:r,controls_on_map:!1,map_options:{set_center:[37.390267,-122.076417],zoom:12,streetViewControl:!1},styles:{"Blue water":[{featureType:"water",stylers:[{color:"#46bcec"},{visibility:"on"}]},{featureType:"landscape",stylers:[{color:"#f2f2f2"}]},{featureType:"road",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]}]}}).Load();e.on("click",function(e){e.preventDefault();var t=$(this),a=t.index();t.addClass("md-list-item-active").siblings().removeClass("md-list-item-active"),google.maps.event.trigger(s.markers[a],"click")}),$(window).on("debouncedresize",function(){var e=s.oMap;google.maps.event.trigger(e,"resize"),e.fitBounds(s.oBounds)})}},peity_charts:function(){$(".peity_orders").peity("donut",{height:24,width:24,fill:["#8bc34a","#eee"]}),$(".peity_visitors").peity("bar",{height:28,width:48,fill:["#d84315"],padding:.2}),$(".peity_sale").peity("line",{height:28,width:64,fill:"#d1e4f6",stroke:"#0288d1"}),$(".peity_conversions_large").peity("bar",{height:64,width:96,fill:["#d84315"],padding:.2});var e=$(".peity_live");if(e.length){var n=e.peity("line",{height:28,width:64,fill:"#efebe9",stroke:"#5d4037"});function r(e,t){return Math.floor(Math.random()*(t-e+1))+e}$("#peity_live_text").text("0"),setInterval(function(){var e=Math.round(10*Math.random()),t=n.text().split(",");t.shift(),t.push(e),n.text(t.join(",")).change();var a=parseInt($("#peity_live_text").text());if(a==(i=r(20,100)))var i=r(20,120);new CountUp("peity_live_text",a,i,0,1.2).start()},2e3)}},count_animated:function(){$(".countUpMe").each(function(){var e=$(this).text();theAnimation=new CountUp(this,0,e,0,2),theAnimation.start()})},clndr_calendar:function(){var i=$("#clndr_events");if(i.length){for(var e=$("#clndr_events_template").html(),t=Handlebars.compile(e),a=[],n=0;n<7;n++)a.push(moment().weekday(n).format("dd"));theCalendar=i.clndr({weekOffset:1,daysOfTheWeek:a,events:clndrEvents,render:function(e){return t(e)},clickEvents:{click:function(e){if(e.events.length){var t=$(".clndr_events"),a=e.date._i;$(e.element).siblings(".day").removeClass("day-active").end().addClass("day-active"),t.children("[data-clndr-event="+a+"]").length?(t.children(".clndr_event").hide(),i.hasClass("events_visible")?t.children("[data-clndr-event="+a+"]").velocity("transition.slideUpIn",{stagger:100,drag:!0}):(l(),i.addClass("events_visible"),t.children("[data-clndr-event="+a+"]").velocity("transition.slideUpIn",{stagger:100,drag:!0,delay:280}))):$(e.element).hasClass("last-month")?(setTimeout(function(){i.find(".calendar-day-"+e.date._i).click()},380),i.find(".clndr_previous").click()):$(e.element).hasClass("next-month")&&(setTimeout(function(){i.find(".calendar-day-"+e.date._i).click()},380),i.find(".clndr_next").click())}}}});var r=function(){i.addClass("animated_change").removeClass("events_visible"),setTimeout(function(){i.removeClass("animated_change")},380)};i.on("click",".clndr_next",function(e){e.preventDefault(),r(),setTimeout(function(){theCalendar.forward()},280)}),i.on("click",".clndr_previous",function(e){e.preventDefault(),r(),setTimeout(function(){theCalendar.back()},280)}),i.on("click",".clndr_today",function(e){e.preventDefault(),r(),setTimeout(function(){theCalendar.setYear(moment().format("YYYY")).setMonth(moment().format("M")-1)},280)}),i.on("click",".clndr_events_close_button",function(){i.removeClass("events_visible events_over")}),event_modal=UIkit.modal("#modal_clndr_new_event"),i.on("click",".clndr_add_event",function(){event_modal.isActive()?event_modal.hide():(event_modal.show(),i.removeClass("events_visible"),setTimeout(function(){$window.resize()},280))}),$("#clndr_new_event_submit").on("click",function(){var e="#clndr_event_title_control",t="#clndr_event_link_control",a="#clndr_event_date_control",i="#clndr_event_start_control",n="#clndr_event_end_control";if(""==$(e).val())return $(e).addClass("md-input-danger").focus(),altair_md.update_input($(e)),!1;if(""==$(a).val())return $(a).addClass("md-input-danger").focus(),altair_md.update_input($(a)),!1;var r=[{date:$(a).val(),title:$(e).val(),url:$(t).val()?$(t).val():"javascript:void(0)",timeStart:$(i).val(),timeEnd:$(n).val()}];theCalendar.addEvents(r),theCalendar.setMonth(moment($(a).val()).format("M")-1),event_modal.hide(),$(e+","+t+","+a+","+i+","+n).removeClass("md-input-danger").val(""),altair_md.update_input($(e+","+t+","+a+","+i+","+n))});var s=7*i.find(".day > span").outerWidth()+240+32+14;function l(){i.width()<s?i.addClass("events_over"):i.removeClass("events_over")}l(),$(window).on("debouncedresize",function(){l()})}},video_player:function(){var i=$("#video_player"),n=$("#video_player_playlist"),r="md-list-item-active";i.length&&(n.on("click","li",function(e){e.stopPropagation();var t=$(this);if(!t.hasClass(r)){var a="https://www.youtube.com/embed/"+t.attr("data-video-src")+"?rel=0";n.children("li").removeClass(r),t.addClass(r),i.velocity({translateZ:0,scale:0,opacity:0},{duration:280,easing:easing_swiftOut,complete:function(){i.children("iframe").attr("src",a),setTimeout(function(){i.velocity("reverse")},280)}})}}),n.children("li:first").trigger("click"))}};